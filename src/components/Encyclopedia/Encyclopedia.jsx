import React from 'react';
import useScrollAnimation from '../../hooks/useScrollAnimation';
import './Encyclopedia.css';
import { PiArrowRightThin, PiCalendarBlankThin } from 'react-icons/pi';
import useThemeStore from '../../store/themeStore';

// Article Data
const articles = [
  {
    id: 1,
    title: '隐形眼镜过夜戴 你的眼睛答应吗？',
    date: '2025-01-14',
    image:
      'https://de4965e.webp.li/blog-images/2025/10/2f6a0b55f60a69ba64b0c7e5bf97b5c7.jpg',
    link: 'https://mp.weixin.qq.com/s/OflLi98aHmvZ3DSAzse2FQ',
  },
  {
    id: 2,
    title: '十大伤眼行为 你中了几个？',
    date: '2025-01-13',
    image:
      'https://de4965e.webp.li/blog-images/2025/10/d89cbd705e25b8c7ed4633435d2c9018.jpg',
    link: 'https://mp.weixin.qq.com/s/4rDQ-mbCilaJMlZFwsbyIQ',
  },
  {
    id: 3,
    title: '大国小工匠｜桃浦新"视"力，系列科普活动第一期精彩回顾！',
    date: '2025-01-12',
    image:
      'https://de4965e.webp.li/blog-images/2025/10/d2ef59747813c40c6b1850900d8414c5.png',
    link: 'https://mp.weixin.qq.com/s/vH5E34G0YNnd1UeSxwLtPQ',
  },
  {
    id: 4,
    title: '揭秘双眼视功能：为何双眼看物能合二为一？',
    date: '2025-01-11',
    image:
      'https://de4965e.webp.li/blog-images/2025/10/750a08e613813151408136d78b5af9d8.png',
    link: 'https://mp.weixin.qq.com/s/HlTcTUITOZ_z5FsYOEK_vw',
  },
];

const Encyclopedia = ({ theme: propTheme }) => {
  const [ref, isVisible] = useScrollAnimation(0.1);
  const storeTheme = useThemeStore((state) => state.currentTheme);
  const theme = propTheme || storeTheme;
  const isLaifen = theme === 'laifen';

  return (
    <section
      className={`encyclopedia-container ${isLaifen ? 'theme-laifen' : ''}`}
      ref={ref}
    >
      <div
        className={`encyclopedia-inner scroll-animate ${isVisible ? 'in-view' : ''}`}
      >
        {/* Header */}
        <div className="encyclopedia-header">
          <div className="header-left">
            <div className="title-wrapper">
              <h2>
                {['眼', '界', '百', '科'].map((char, index) => (
                  <span
                    key={index}
                    className="char"
                    style={{ animationDelay: `${index * 0.05}s` }}
                  >
                    {char}
                  </span>
                ))}
              </h2>
            </div>
            <div className="subtitle-wrapper">
              <p>专业眼科知识，科学护眼指南</p>
            </div>
          </div>
        </div>

        {/* Grid */}
        <div className="encyclopedia-grid">
          {articles.map((item) => (
            <a
              key={item.id}
              href={item.link}
              target="_blank"
              rel="noopener noreferrer"
              className="encyclopedia-card"
            >
              <div className="card-image-wrapper">
                <img src={item.image} alt={item.title} className="card-image" />
              </div>
              <div className="card-content">
                <div className="card-date">
                  <PiCalendarBlankThin className="date-icon" />
                  {item.date}
                </div>
                <h3 className="card-title">{item.title}</h3>
                <span className="read-more-btn">
                  阅读更多 <PiArrowRightThin className="action-icon" />
                </span>
              </div>
            </a>
          ))}
        </div>

        {/* Bottom Actions */}
        <div className="encyclopedia-footer">
          <a href="/encyclopedia" className="view-more-btn">
            查看更多 <PiArrowRightThin className="action-icon" />
          </a>
        </div>
      </div>
    </section>
  );
};

export default Encyclopedia;
